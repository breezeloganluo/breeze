CREATE TABLE `cmsmetadata` (
  `cid` int(11) NOT NULL auto_increment,
  `dataDesc` text,
  `alias` varchar(128) NOT NULL,
  `tableName` varchar(128) default NULL,
  `displayName` varchar(128) default NULL,
  `parentAlias` varchar(128) default NULL,
  `dataRefresh` varchar(128) default NULL,
  `dataOwner` varchar(64) default NULL,
  `opertime` bigint(20) default NULL,
  `nodeid` int(11) default NULL,
  `dataOwnerSet` varchar(128) default NULL,
  `dataMemo` text,
  `roleSetting` varchar(64) default NULL,
  `outAlias` varchar(64) default NULL,
  `isMuliTab` varchar(64) default NULL,
  `checkField` text,
  PRIMARY KEY  (`cid`),
  UNIQUE KEY `alias` (`alias`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE `wg_channelclass` (
  `alias` varchar(128) default NULL,
  `displayName` varchar(256) default NULL,
  `opertime` bigint(20) default NULL,
  `cid` int(11) NOT NULL auto_increment,
  `dataOwner` varchar(64) default NULL,
  `nodeid` int(11) default NULL,
  PRIMARY KEY  (`cid`)
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8;

INSERT INTO `cmsmetadata` (`cid`, `dataDesc`, `alias`, `tableName`, `displayName`, `parentAlias`, `dataRefresh`, `dataOwner`, `opertime`, `nodeid`, `dataOwnerSet`, `dataMemo`, `roleSetting`, `outAlias`, `isMuliTab`, `checkField`)
VALUES
	(29,'{\"tableName\":{\"title\":\"表名\",\"type\":\"Text\",\"fieldType\":\"varchar\",\"ourterLink\":\"\",\"fieldLen\":\"128\",\"dataExt\":\"\",\"desc\":\"\",\"width\":\"\",\"fieldtmp\":\"\",\"islist\":\"1\",\"issearch\":\"1\",\"order\":\"50\",\"orderBy\":\"0\",\"mobileShow\":\"0\"},\"displayName\":{\"title\":\"模型名称\",\"type\":\"Text\",\"fieldType\":\"varchar\",\"ourterLink\":\"\",\"fieldLen\":\"128\",\"dataExt\":\"\",\"desc\":\"\",\"width\":\"\",\"fieldtmp\":\"\",\"islist\":\"1\",\"issearch\":\"0\",\"order\":\"50\",\"orderBy\":\"0\",\"mobileShow\":\"0\"},\"parentAlias\":{\"title\":\"挂接模型\",\"type\":\"Text\",\"fieldType\":\"varchar\",\"ourterLink\":\"\",\"fieldLen\":\"128\",\"dataExt\":\"\",\"desc\":\"\",\"width\":\"\",\"fieldtmp\":\"\",\"islist\":\"1\",\"issearch\":\"0\",\"order\":\"50\",\"orderBy\":\"0\",\"mobileShow\":\"0\"},\"dataRefresh\":{\"title\":\"数据刷新\",\"type\":\"Text\",\"fieldType\":\"varchar\",\"ourterLink\":\"\",\"fieldLen\":\"128\",\"dataExt\":\"\",\"desc\":\"\",\"width\":\"\",\"fieldtmp\":\"\",\"islist\":\"1\",\"issearch\":\"0\",\"order\":\"50\",\"orderBy\":\"0\",\"mobileShow\":\"0\"},\"dataDesc\":{\"title\":\"数据描述\",\"type\":\"Text\",\"fieldType\":\"Text\",\"ourterLink\":\"\",\"fieldLen\":\"\",\"dataExt\":\"\",\"desc\":\"\",\"width\":\"\",\"fieldtmp\":\"\",\"islist\":\"0\",\"issearch\":\"0\",\"order\":\"50\",\"orderBy\":\"0\",\"mobileShow\":\"0\"},\"dataOwnerSet\":{\"title\":\"数据权限设置\",\"type\":\"Text\",\"fieldType\":\"varchar\",\"ourterLink\":\"\",\"fieldLen\":\"128\",\"dataExt\":\"\",\"desc\":\"\",\"width\":\"\",\"fieldtmp\":\"\",\"islist\":\"1\",\"issearch\":\"0\",\"order\":\"50\",\"orderBy\":\"0\",\"mobileShow\":\"0\"},\"dataOwner\":{\"title\":\"数据所有者\",\"type\":\"Text\",\"fieldType\":\"varchar\",\"ourterLink\":\"\",\"fieldLen\":\"128\",\"dataExt\":\"\",\"desc\":\"\",\"width\":\"\",\"fieldtmp\":\"\",\"islist\":\"1\",\"issearch\":\"0\",\"order\":\"50\",\"orderBy\":\"0\",\"mobileShow\":\"0\"},\"alias\":{\"title\":\"模型别名\",\"type\":\"Text\",\"fieldType\":\"varchar\",\"ourterLink\":\"\",\"fieldLen\":\"128\",\"dataExt\":\"\",\"desc\":\"\",\"width\":\"\",\"fieldtmp\":\"\",\"islist\":\"1\",\"issearch\":\"0\",\"order\":\"40\",\"orderBy\":\"0\",\"mobileShow\":\"0\"},\"roleSetting\":{\"title\":\"权限设置\",\"type\":\"CheckBox\",\"fieldType\":\"varchar\",\"ourterLink\":\"\",\"fieldLen\":\"64\",\"dataExt\":\"\",\"valueRange\":[{\"内容添加\":\"0\",\"内容修改\":\"1\",\"内容删除\":\"2\",\"内容查询\":\"3\"},{\"节点添加\":\"4\",\"节点修改\":\"5\",\"节点删除\":\"6\",\" 节点查询\":\"7\"}],\"desc\":\"* 这张表是否需要配置功能权限\",\"width\":\"\",\"fieldtmp\":\"\",\"islist\":\"0\",\"issearch\":\"0\",\"order\":\"60\",\"orderBy\":\"0\",\"mobileShow\":\"0\"},\"outAlias\":{\"title\":\"外接模型\",\"type\":\"Text\",\"fieldType\":\"varchar\",\"ourterLink\":\"\",\"fieldLen\":\"64\",\"dataExt\":\"\",\"desc\":\"本数据模型用于挂接空连接,在添加时直接弹出本alias的蒙板层，且是批量的\",\"width\":\"\",\"fieldtmp\":\"\",\"islist\":\"0\",\"issearch\":\"0\",\"order\":\"60\",\"orderBy\":\"0\",\"mobileShow\":\"0\"},\"dataMemo\":{\"title\":\"数据备注说明\",\"type\":\"TextArea\",\"fieldType\":\"Text\",\"ourterLink\":\"\",\"fieldLen\":\"\",\"dataExt\":\"\",\"desc\":\"\",\"width\":\"\",\"fieldtmp\":\"\",\"islist\":\"0\",\"issearch\":\"0\",\"order\":\"70\",\"orderBy\":\"0\",\"mobileShow\":\"0\"},\"checkField\":{\"title\":\"表校验\",\"type\":\"Text\",\"fieldType\":\"Text\",\"ourterLink\":\"\",\"fieldLen\":\"\",\"dataExt\":\"\",\"desc\":\"\",\"width\":\"\",\"fieldtmp\":\"\",\"islist\":\"0\",\"issearch\":\"1\",\"order\":\"50\",\"orderBy\":\"0\",\"mobileShow\":\"0\"},\"isMuliTab\":{\"title\":\"多表信息\",\"type\":\"Text\",\"fieldType\":\"varchar\",\"ourterLink\":\"\",\"fieldLen\":\"64\",\"dataExt\":\"\",\"desc\":\"\",\"width\":\"\",\"fieldtmp\":\"\",\"islist\":\"0\",\"issearch\":\"1\",\"order\":\"50\",\"orderBy\":\"0\",\"mobileShow\":\"0\"}}','channel','cmsmetadata','数据模型','channelClass','',NULL,NULL,1,'','','[1,2,3,4,5,6,7]','','0','function(data){\n	var checks = {\n		ADD: \'ADD\',\n		ALL: \'ALL\',\n		ALTER: \'ALTER\',\n		ANALYZE: \'ANALYZE\',\n		AND: \'AND\',\n		AS: \'AS\',\n		ASC: \'ASC\',\n		ASENSITIVE: \'ASENSITIVE\',\n		BEFORE: \'BEFORE\',\n		BETWEEN: \'BETWEEN\',\n		BIGINT: \'BIGINT\',\n		BINARY: \'BINARY\',\n		BLOB: \'BLOB\',\n		BOTH: \'BOTH\',\n		BY: \'BY\',\n		CALL: \'CALL\',\n		CASCADE: \'CASCADE\',\n		CASE: \'CASE\',\n		CHANGE: \'CHANGE\',\n		CHAR: \'CHAR\',\n		CHARACTER: \'CHARACTER\',\n		CHECK: \'CHECK\',\n		COLLATE: \'COLLATE\',\n		COLUMN: \'COLUMN\',\n		CONDITION: \'CONDITION\',\n		CONNECTION: \'CONNECTION\',\n		CONSTRAINT: \'CONSTRAINT\',\n		CONTINUE: \'CONTINUE\',\n		CONVERT: \'CONVERT\',\n		CREATE: \'CREATE\',\n		CROSS: \'CROSS\',\n		CURRENT_DATE: \'CURRENT_DATE\',\n		CURRENT_TIME: \'CURRENT_TIME\',\n		CURRENT_TIMESTAMP: \'CURRENT_TIMESTAMP\',\n		CURRENT_USER: \'CURRENT_USER\',\n		CURSOR: \'CURSOR\',\n		DATABASE: \'DATABASE\',\n		DATABASES: \'DATABASES\',\n		DAY_HOUR: \'DAY_HOUR\',\n		DAY_MICROSECOND: \'DAY_MICROSECOND\',\n		DAY_MINUTE: \'DAY_MINUTE\',\n		DAY_SECOND: \'DAY_SECOND\',\n		DEC: \'DEC\',\n		DECIMAL: \'DECIMAL\',\n		DECLARE: \'DECLARE\',\n		DEFAULT: \'DEFAULT\',\n		DELAYED: \'DELAYED\',\n		DELETE: \'DELETE\',\n		DESC: \'DESC\',\n		DESCRIBE: \'DESCRIBE\',\n		DETERMINISTIC: \'DETERMINISTIC\',\n		DISTINCT: \'DISTINCT\',\n		DISTINCTROW: \'DISTINCTROW\',\n		DIV: \'DIV\',\n		DOUBLE: \'DOUBLE\',\n		DROP: \'DROP\',\n		DUAL: \'DUAL\',\n		EACH: \'EACH\',\n		ELSE: \'ELSE\',\n		ELSEIF: \'ELSEIF\',\n		ENCLOSED: \'ENCLOSED\',\n		ESCAPED: \'ESCAPED\',\n		EXISTS: \'EXISTS\',\n		EXIT: \'EXIT\',\n		EXPLAIN: \'EXPLAIN\',\n		FALSE: \'FALSE\',\n		FETCH: \'FETCH\',\n		FLOAT: \'FLOAT\',\n		FLOAT4: \'FLOAT4\',\n		FLOAT8: \'FLOAT8\',\n		FOR: \'FOR\',\n		FORCE: \'FORCE\',\n		FOREIGN: \'FOREIGN\',\n		FROM: \'FROM\',\n		FULLTEXT: \'FULLTEXT\',\n		GOTO: \'GOTO\',\n		GRANT: \'GRANT\',\n		GROUP: \'GROUP\',\n		HAVING: \'HAVING\',\n		HIGH_PRIORITY: \'HIGH_PRIORITY\',\n		HOUR_MICROSECOND: \'HOUR_MICROSECOND\',\n		HOUR_MINUTE: \'HOUR_MINUTE\',\n		HOUR_SECOND: \'HOUR_SECOND\',\n		IF: \'IF\',\n		IGNORE: \'IGNORE\',\n		IN: \'IN\',\n		INDEX: \'INDEX\',\n		INFILE: \'INFILE\',\n		INNER: \'INNER\',\n		INOUT: \'INOUT\',\n		INSENSITIVE: \'INSENSITIVE\',\n		INSERT: \'INSERT\',\n		INT: \'INT\',\n		INT1: \'INT1\',\n		INT2: \'INT2\',\n		INT3: \'INT3\',\n		INT4: \'INT4\',\n		INT8: \'INT8\',\n		INTEGER: \'INTEGER\',\n		INTERVAL: \'INTERVAL\',\n		INTO: \'INTO\',\n		IS: \'IS\',\n		ITERATE: \'ITERATE\',\n		JOIN: \'JOIN\',\n		KEY: \'KEY\',\n		KEYS: \'KEYS\',\n		KILL: \'KILL\',\n		LABEL: \'LABEL\',\n		LEADING: \'LEADING\',\n		LEAVE: \'LEFT\',\n		LIKE: \'LIKE\',\n		LIMIT: \'LIMIT\',\n		LINEAR: \'LINEAR\',\n		LINES: \'LINES\',\n		LOAD: \'LOAD\',\n		LOCALTIME: \'LOCALTIME\',\n		LOCALTIMESTAMP: \'LOCALTIMESTAMP\',\n		LOCK: \'LOCK\',\n		LONG: \'LONG\',\n		LONGBLOB: \'LONGBLOB\',\n		LONGTEXT: \'LONGTEXT\',\n		LOOP: \'LOOP\',\n		LOW_PRIORITY: \'LOW_PRIORITY\',\n		MATCH: \'MATCH\',\n		MEDIUMBLOB: \'MEDIUMBLOB\',\n		MEDIUMINT: \'MEDIUMINT\',\n		MEDIUMTEXT: \'MEDIUMTEXT\',\n		MIDDLEINT: \'MIDDLEINT\',\n		MINUTE_MICROSECOND: \'MINUTE_MICROSECOND\',\n		MINUTE_SECOND: \'MINUTE_SECOND\',\n		MOD: \'MOD\',\n		MODIFIES: \'MODIFIES\',\n		NATURAL: \'NATURAL\',\n		NOT: \'NOT\',\n		NO_WRITE_TO_BINLOG: \'NO_WRITE_TO_BINLOG\',\n		NULL: \'NULL\',\n		NUMERIC: \'NUMERIC\',\n		ON: \'ON\',\n		OPTIMIZE: \'OPTIMIZE\',\n		OPTION: \'OPTION\',\n		OPTIONALLY: \'OPTIONALLY\',\n		OR: \'OR\',\n		ORDER: \'ORDER\',\n		OUT: \'OUT\',\n		OUTER: \'OUTER\',\n		OUTFILE: \'OUTFILE\',\n		PRECISION: \'PRECISION\',\n		PRIMARY: \'PRIMARY\',\n		PROCEDURE: \'PROCEDURE\',\n		PURGE: \'PURGE\',\n		RAID0: \'RAID0\',\n		RANGE: \'RANGE\',\n		READ: \'READ\',\n		READS: \'READS\',\n		REAL: \'REAL\',\n		REFERENCES: \'REFERENCES\',\n		REGEXP: \'REGEXP\',\n		RELEASE: \'RELEASE\',\n		RENAME: \'RENAME\',\n		REPEAT: \'REPEAT\',\n		REPLACE: \'REPLACE\',\n		REQUIRE: \'REQUIRE\',\n		RESTRICT: \'RESTRICT\',\n		RETURN: \'RETURN\',\n		REVOKE: \'REVOKE\',\n		RIGHT: \'RIGHT\',\n		RLIKE: \'RLIKE\',\n		SCHEMA: \'SCHEMA\',\n		SCHEMAS: \'SCHEMAS\',\n		SECOND_MICROSECOND: \'SECOND_MICROSECOND\',\n		SELECT: \'SELECT\',\n		SENSITIVE: \'SENSITIVE\',\n		SEPARATOR: \'SEPARATOR\',\n		SET: \'SET\',\n		SHOW: \'SHOW\',\n		SMALLINT: \'SMALLINT\',\n		SPATIAL: \'SPATIAL\',\n		SPECIFIC: \'SPECIFIC\',\n		SQL: \'SQL\',\n		SQLEXCEPTION: \'SQLEXCEPTION\',\n		SQLSTATE: \'SQLSTATE\',\n		SQLWARNING: \'SQLWARNING\',\n		SQL_BIG_RESULT: \'SQL_BIG_RESULT\',\n		SQL_CALC_FOUND_ROWS: \'SQL_CALC_FOUND_ROWS\',\n		SQL_SMALL_RESULT: \'SQL_SMALL_RESULT\',\n		SSL: \'SSL\',\n		STRAIGHT: \'STRAIGHT\',\n		STRAIGHT_JOIN: \'STRAIGHT_JOIN\',\n		TABLE: \'TABLE\',\n		TERMINATED: \'TERMINATED\',\n		THEN: \'THEN\',\n		TINYBLOB: \'TINYBLOB\',\n		TINYINT: \'TINYINT\',\n		TINYTEXT: \'TINYTEXT\',\n		TO: \'TO\',\n		TRAILING: \'TRAILING\',\n		TRIGGER: \'TRIGGER\',\n		TRUE: \'TRUE\',\n		UNDO: \'UNDO\',\n		UNION: \'UNION\',\n		UNIQUE: \'UNIQUE\',\n		UNLOCK: \'UNLOCK\',\n		UNSIGNED: \'UNSIGNED\',\n		UPDATE: \'UPDATE\',\n		USAGE: \'USAGE\',\n		USE: \'USE\',\n		USING: \'USING\',\n		UTC_DATE: \'UTC_DATE\',\n		UTC_TIME: \'UTC_TIME\',\n		UTC_TIMESTAMP: \'UTC_TIMESTAMP\',\n		VALUES: \'VALUES\',\n		VARBINARY: \'VARBINARY\',\n		VARCHAR: \'VARCHAR\',\n		VARCHARACTER: \'VARCHARACTER\',\n		VARYING: \'VARYING\',\n		WHEN: \'WHEN\',\n		WHERE: \'WHERE\',\n		WHILE: \'WHILE\',\n		WITH: \'WITH\',\n		WRITE: \'WRITE\',\n		X509: \'X509\',\n		XOR: \'XOR\',\n		YEAR_MONTH: \'YEAR_MONTH\',\n		ZEROFILL: \'ZEROFILL\'\n	}\n	if(!data){\n		alert(\'不能创建空模型!\');\n		return false;\n	}\n	if(!data.tableName){\n		alert(\'表名不能为空!\');\n		return false;\n	}\n	if(/\\s/ig.test(data.tableName)){\n		alert(\'表名不能包含空格!\');\n		return false;\n	}\n	if(!/^[0-9a-zA-z_]+$/ig.test(data.tableName)){\n		alert(\'表名只能由英文字母数字和下划线组成!\');\n		return false;\n	}\n	if(!data.displayName){\n		alert(\'模型名称不能为空!\');\n		return false;\n	}\n	if(/\\s/ig.test(data.displayName)){\n		alert(\'模型名称不能包含空格!\');\n		return false;\n	}\n	if(!data.dataDesc){\n		alert(\'描述数据不能为空!\');\n		return false;\n	}\n	if(data.dataDesc.length == 0){\n		alert(\'描述数据不能为空!\');\n		return false;\n	}\n	if(!data.roleSetting){\n		alert(\'权限设置不能为空!\');\n		return false;\n	}\n	if(data.roleSetting.lengh == 0){\n		alert(\'权限设置不能为空!\');\n		return false;		\n	}\n	if(!data.alias){\n		alert(\'模型别名不能为空!\');\n		return false;\n	}\n	if(/\\s/ig.test(data.alias)){\n		alert(\'模型别名不能包含空格!\');\n		return false;\n	}\n	if(!/^[a-zA-Z0-9]+$/ig.test(data.alias)){\n		alert(\'模型别名必须是英文或数字!\');\n		return false;\n	}\n	if(checks[data.displayName.toLocaleUpperCase()]){\n		alert(\'模型名称不能为系统关键字!\');\n		return false;\n	}\n	if(checks[data.extended.toLocaleUpperCase()]){\n		alert(\'模型继承不能为系统关键字!\');\n		return false;\n	}\n	if(checks[data.alias.toLocaleUpperCase()]){\n		alert(\'模型别名不能为系统关键字!\');\n		return false;\n	}\n	if(checks[data.tableName.toLocaleUpperCase()]){\n		alert(\'表名不能为系统关键字!\');\n		return false;\n	}\n	if(checks[data.parentAlias.toLocaleUpperCase()]){\n		alert(\'挂接模型不能为系统关键字!\');\n		return false;\n	}\n	if(checks[data.outAlias.toLocaleUpperCase()]){\n		alert(\'外部引用alias不能为系统关键字!\');\n		return false;\n	}\n	return true;\n}'),
	(30,'{\"displayName\":{\"title\":\"分类名称\",\"type\":\"Text\",\"fieldType\":\"varchar\",\"ourterLink\":\"\",\"fieldLen\":\"\",\"dataExt\":\"\",\"desc\":\"\",\"width\":\"\",\"fieldtmp\":\"\",\"islist\":\"1\",\"issearch\":\"0\",\"order\":\"50\",\"orderBy\":\"0\",\"mobileShow\":\"0\"}}','channelClass','wg_channelclass','模型分类','','',NULL,NULL,1,'','','[0,1,2,3,4,5,6,7]','','0','function(data){\n	if(!data){\n		alert(\'模型分类不能为空!\');\n		return false;\n	}\n	if(!data.displayName || data.displayName.trim() == \'\'){\n		alert(\'分类名称不能为空!\');\n		return false;\n	}\n	return true;\n}');